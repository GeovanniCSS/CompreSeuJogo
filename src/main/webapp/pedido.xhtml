<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<f:metadata>
		<f:viewParam name="id" value="#{vendaBean.venda.id}" />
		<f:viewAction action="#{vendaBean.encontrar()}" />
	</f:metadata>
</h:head>
<ui:composition template="/WEB-INF/template/template.xhtml">
	<ui:define name="tituloJanela">Pedidos</ui:define>
	<ui:define name="conteudo">
		<h:form id="form">
			<p:growl id="msg" autoUpdate="true" life="3000" />
			<p:panelGrid columns="2" style="width:100%"
				columnClasses="logo,detail">
				<p:outputPanel>
					<h:panelGrid columns="2" cellpadding="5">
						<h:outputText value="Número do pedido:" />
						<p:outputLabel value="#{vendaBean.venda.id}" style="color:white" />

						<h:outputText value="Valor total da venda: R$" />
						<p:outputLabel value="#{vendaBean.venda.valor}" />

						<h:outputText value="Itens:" />
						<p:outputLabel value="#{vendaBean.venda.item.size()}" />
					</h:panelGrid>
				</p:outputPanel>
			</p:panelGrid>
			<p:carousel value="#{vendaBean.venda.item}" var="item" numVisible="1"
				effect="easeInStrong" style="margin-bottom:0">
				<p:tab title="#{item.produto.nome}">
					<div class="ui-g">
						<div class="ui-g-3">
							<p:graphicImage style="width: 200px;height: 250px;padding: 20px;"
								library="imagem" name="#{item.produto.imagem}" />
							<p:rating style="padding-left:78px;" value="#{item.produto.nota}"
								readonly="true" />
						</div>
						<div style="float: center" class="ui-g-6">
							<div style="text-align: center">
								<p:panel>
									<h1>#{item.produto.nome}</h1>
									<ul>
										<li style="font-size: 1.2em; text-align: left;">Preço: R$
											#{item.produto.valor}</li>
										<li style="font-size: 1.2em; text-align: left;">Plataforma:
											#{item.produto.plataforma.nome}</li>
										<li style="font-size: 1.2em; text-align: left;">Categoria:
											#{item.produto.categoria.nome}</li>
										<li style="font-size: 1.2em; text-align: left;">Marca:
											#{item.produto.marca.nome}</li>
										<li style="font-size: 1.2em; text-align: left;">Descrição:
											#{item.produto.descricao}</li>
									</ul>
								</p:panel>
							</div>
						</div>
						<div style="float: right;" class="ui-g-3">
							<p:panel>
								<p:commandButton value="Dar nota"
									style="margin-center:20px;"
									onclick="PF('wdialog').show();"/>
									
									<p:dialog id="dialog" widgetVar="wdialog" header="Avaliação - #{item.produto.nome}" modal="true" appendTo="@(body)" hideEffect="explode">
									 	<h:form  id="avaliacao">
									 	<p:panelGrid columns="1" layout="grid">
											<p:outputLabel value="Título"/>
												<p:inputText id="titulo" rows="1"
													         value="#{avaliacaoBean.avaliacao.titulo}"
													 	     required="true" requiredMessage="O campo é obrigatório" />
													 	     
													
										    <p:outputLabel value="Data"/>
												<p:inputMask id="data" rows="1"
														     value="#{avaliacaoBean.avaliacao.data}"
														     mask="99/99/9999"
														     required="true" requiredMessage="O campo é obrigatório" />	
														
										    <p:outputLabel value="Descrição"/>
												<p:inputTextarea id="descricao"
							                                     value="#{avaliacaoBean.avaliacao.descricao}" rows="4" cols="45"
							                                     required="true" />

				                             <p:outputLabel value="Pontos"/>
										     <p:rating style="padding-left:80px;"/>
											<br></br>
											<p:commandButton value="Salvar" icon="ui-icon-check" id="salvar"
															 action="#{avaliacaoBean.salvar}" process="@this"
															 update="@form" onsucess="PF('wdialog').hide();">
											</p:commandButton>										
										</p:panelGrid>	
										</h:form>								
									</p:dialog>
							</p:panel>
						</div>
					</div>
				</p:tab>
			</p:carousel>
			<hr />
		</h:form>
	</ui:define>
</ui:composition>
</html>